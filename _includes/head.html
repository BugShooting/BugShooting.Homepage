<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}</title>
    <meta name="description" content="{{ site.description }}">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    
    <script src="/jquery.i18n/CLDRPluralRuleParser.js"></script>
    <script src="/jquery.i18n/jquery.i18n.js"></script>
    <script src="/jquery.i18n/jquery.i18n.messagestore.js"></script>
    <script src="/jquery.i18n/jquery.i18n.fallbacks.js"></script>
    <script src="/jquery.i18n/jquery.i18n.language.js"></script>
    <script src="/jquery.i18n/jquery.i18n.parser.js"></script>
    <script src="/jquery.i18n/jquery.i18n.emitter.js"></script>
    <script src="/jquery.i18n/jquery.i18n.emitter.bidi.js"></script>
    
    <link rel="stylesheet" href="/css/main.css">
    <link rel="shortcut icon" type="image/svg+xml" href="/assets/favicon.svg">
    
    <script>
	    
      jQuery(function() {
      $.extend($.i18n.parser.emitter, {
        appname: function() {
          return "Bug Shooting";
        }
        });
      });

       const allLocales = new Set(['de', 'en', 'ru', 'it'])
       
       var locale = getCookie('locale');
	    
       if (locale !== '') { 
        $.i18n().locale = locale;
       }
	    
       if (!allLocales.has($.i18n().locale)) {
        $.i18n().locale = 'en';
       }

       $.i18n().fallbackLocale = 'en';

       $.i18n().load('/jquery.i18n/languages/' + $.i18n().locale + '.json', $.i18n().locale).done(
          function () {
	          $('body').i18n(); 
          } );
 
        function setLocale(locale) {
          setCookie('locale', locale, 30);
          location.reload();
        }

        function setCookie(name, value, daysToLive) {
          document.cookie = name + "=" + encodeURIComponent(value) + "; max-age=" + (daysToLive*24*60*60) + "; path=/";
        }

        function getCookie(name) {
          var cookieArr = document.cookie.split(";");
          for(var i = 0; i < cookieArr.length; i++) {
              var cookiePair = cookieArr[i].split("=");
              if(name == cookiePair[0].trim()) {
                  return decodeURIComponent(cookiePair[1]);
              }
          }
          return null;
       }
       
    </script>
    
</head>
